<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Station 1</title>
  <script type="text/javascript" src="../simpleGame.js"></script>
  <!-- ------------------- script game ------------------- -->
  <script type="text/javascript">
    var game;
    var background;
    var car_self;
    var ROAD_SPEED = 15;

    function Road() {
      //background
      tRoad = new Sprite(game, "../img/bg.jpg", 800, 1440);
      tRoad.setSpeed(0, 0);
      //ตึง background ไว้
      tRoad.setDX(0);
      tRoad.setDY(ROAD_SPEED)
      tRoad.setPosition(400, 300);
      tRoad.maxSpeed = 18;
      tRoad.minSpeed = 15;

      tRoad.checkBounds = function () {
        if (this.y > 720) {
          this.setPosition(400, -120)
        } // end if
      }

      tRoad.checkKeys = function () {
        //used for testing ocean position
        if (keysDown[K_UP] && ROAD_SPEED <= tRoad.maxSpeed) {
          ROAD_SPEED += .5;
          tRoad.setDY(ROAD_SPEED)
        }
        if (keysDown[K_DOWN] && ROAD_SPEED >= tRoad.minSpeed) {
          ROAD_SPEED -= .5;
          tRoad.setDY(ROAD_SPEED)
        }
      } // end checkKeys

      return tRoad;
    }

    function CarSelf() {
      tCar = new Sprite(game, "../img/car-self.png", 75, 120);
      tCar.setPosition(350, 530);

      tCar.setSpeed(0);
      tCar.maxSpeed = 10;
      tCar.minSpeed = -3;

      tCar.checkKeys = function () {
        if (keysDown[K_UP]) {

        }
        else if (keysDown[K_DOWN]) {

        }
        else if (keysDown[K_LEFT]) {
          this.setSpeed(ROAD_SPEED);
          this.setMoveAngle(270);
        }
        else if (keysDown[K_RIGHT]) {
          this.setSpeed(ROAD_SPEED);
          this.setMoveAngle(90);
        } else {
          this.setSpeed(0);
        }

        // console.log('=', this.x, this.y)
        // tCar.setSpeed(this.speed);
      }

      tCar.checkGravity = function () {
        if (this.x > 750) {
          this.setPosition(750, this.y);
        } else if (this.x < 45) {
          this.setPosition(45, this.y);

        }
      }

      return tCar;
    }

    // init function
    function init() {
      //game 
      game = new Scene();

      //background
      background = new Road();

      //car_self
      car_self = new CarSelf();


      game.start();
    } //end init 


    //update function
    function update() {
      game.clear();

      car_self.checkKeys();
      car_self.checkGravity();
      background.checkKeys();

      background.update();
      car_self.update();
    }//end update

  </script>
</head>


<body onload="init()">

</body>

</html>